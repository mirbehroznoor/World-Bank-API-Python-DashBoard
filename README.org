#+title: World Bank API Python DashBoard
#+author: Mir Behroz Noor

*Since [[https://data.worldbank.org/indicator/NY.GDP.MKTP.CD][The World Bank Data]] has stopped visualizing data for years before 2000. This project aims at providing the visualizations of the data available from [[https://github.com/tgherzog/wbgapi][World Bank API Python]]. There is World Bank package for R too. Either in R and Python, both support interactive Plotly. I found it easier to implement in Python. I hope someone else finds it helpful too. The instructions are for GNU/Linux.*

** Dash App Versions
*** Simple App
It is one variable App where user can only change y-axis variable while x-axis is by set to ~Year~ by default. It accepts only one indicator while it is possible to add as many economies as possible.

[[https://raw.githubusercontent.com/mirbehroznoor/World-Bank-API-Python-DashBoard/main/simpleApp.png]]

*** Multi App
*Note: Either select one economy with multiple indicators or one indicator with multiple economies.*
In Multi App, the User can choose two variables, x-axis and y-axis indicators. The user can look for multi-variable trends for a country, otherwise multi and simple Apps are almost the same.
***** Limitation
The Multi App will through an error or won't work, if two or more than two economies and both indicators are selected simultaneously. The problem occurs due to Plotly which does not support Pandas' multi-index Data frame.

[[https://raw.githubusercontent.com/mirbehroznoor/World-Bank-API-Python-DashBoard/main/multiApp.png]]

[[https://raw.githubusercontent.com/mirbehroznoor/World-Bank-API-Python-DashBoard/main/multiApp-2.png]]

*** Possibility to Switch
It is possible to switch from Simple to Multi App or vice versa.
****** Limitation
If App was switched, the options will reset to default. The default settings can be changed from within scripts.

*** Download Graphs as .png
The interactive plotly has the option to download the graphs too.

** Setup

*** Download Github Repository
#+begin_src bash
  git clone https://github.com/mirbehroznoor/World-Bank-API-Python-DashBoard
#+end_src

*** Create a Conda Environment
In =environment.yml=, the conda env is named =wbconda=
#+begin_src shell
  bash build_env.sh
#+end_src

*** Run Python App
Simply run the =app.py= script. The App will open in the default browser after few seconds.
**** Manually
#+begin_src bash
  cd ~/path/to/World-Bank-API-Python-DashBoard
  conda activate wbconda
  python app.py
#+end_src

**** Automate
***** Write Bash Alias function
Find or create =.bash_aliases= in folder =$HOME= Directory. Insert the function snippet:
#+begin_src bash
  wbapp() {
      cd ~/path/to/World-Bank-API-Python-DashBoard
      conda activate wbconda
      python app.py
  }
#+end_src
For shell to re-read the =.bash_aliases= file, run the following command:
#+begin_src bash
  source ~/.bashrc
#+end_src
Afterwards in Terminal, simply run:
#+begin_src bash
  wbapp
#+end_src


*** Default Database
World Bank API is set to World Development Indicators (WDI) Database (db=2) by the module developers.
#+begin_src python
  import wbgapi as wb
  wb.source.info()
#+end_src
**** Globally
In case, of different database request, at top of =appSupport.py=
#+begin_src python
  wb.db = 2
#+end_src


** Acknowledgments
- [[https://towardsdatascience.com/how-to-extract-key-from-python-dictionary-using-value-2b2f8dd2a995][Towardsdatascience: Extract key from python dictionary]]
- [[https://blog.logrocket.com/data-visualization-interfaces-python-dash/][Logrocket Blog: Data Visualization Interfaces Python Dash]]
- [[https://blogs.worldbank.org/opendata/introducing-wbgapi-new-python-package-accessing-world-bank-data][World Bank Blogs: Introducing wbgapi New Python Package Accessing World Bank Data]]
- [[https://github.com/tgherzog/wbgapi][Github: wbgapi]]
- [[https://dash.plotly.com/interactive-graphing][Plotly: Interactive Graphing]]
- [[https://plotly.com/python/legend/][Plotly: Legend]]
- [[https://dash.plotly.com/urls][Plotly: Multi-Page Apps & URLs Support]]
- [[https://stackoverflow.com/questions/62642418/is-there-a-way-to-prevent-a-callback-from-firing-in-dash][Stackoverflow: Prevent a callback from firing in dash]]
